<div class="max-w-3xl mx-auto px-4">
  <h1 class="text-2xl font-bold mb-6">
    <%= t('.title') %>
  </h1>

  <%= form_with model: @memory, class: "space-y-6" do |f| %>
    <%= render 'shared/error_messages', object: f.object %>
    <!--タイトル-->
    <div class="form-control">
      <%= f.label :title, class: "label" %>
      <%= f.text_field :title, class: "input input-bordered w-full" %>
    </div>

    <!--思い出の説明-->
    <div class="form-control">
      <%= f.label :description, class: "label" %>
      <%= f.text_area :description, class: "textarea textarea-bordered w-full", rows: 10 %>
    </div>

    <!-- 思い出の日付 -->
    <div class="form-control">
      <%= f.label :memory_date, class: "label" %>
      <%= f.date_field :memory_date, class: "input input-bordered w-full" %>
    </div>

    <!-- 公開範囲 -->
    <div class="form-control">
      <%= f.label :visibility, class: "label" %>
      <%= f.select :visibility,
            Memory.visibility_options_for_select,
            {},
            class: "select select-bordered w-full" %>
    </div>

    <!-- 画像アップロード -->
    <div class="form-control">
      <%= f.label :image, class: "label" %>
      <%= f.file_field :image, id: "memory_image", direct_upload: true %>

      <!-- 画像プレビュー表示用 -->
      <p class="text-xs text-gray-400 mt-1">
        ※ 変更する場合のみ画像を選択してください
      </p>
      <div id="new-image" class="h-32 mx-auto">
        <% if @memory.image.attached? %>
          <%= image_tag @memory.display_image, class: "h-full mx-auto" %>
        <% end %>
      </div>
    </div>

    <div>
      <%= f.submit nil, class: "btn btn-primary" %>
    </div>
  <% end %>
</div>
